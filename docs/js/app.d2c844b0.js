(function(t){function e(e){for(var o,u,s=e[0],a=e[1],c=e[2],p=0,f=[];p<s.length;p++)u=s[p],Object.prototype.hasOwnProperty.call(r,u)&&r[u]&&f.push(r[u][0]),r[u]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var a=n[s];0!==r[a]&&(o=!1)}o&&(i.splice(e--,1),t=u(u.s=n[0]))}return t}var o={},r={app:0},i=[];function u(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=o,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)u.d(n,o,function(e){return t[e]}.bind(null,o));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=a;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"318c":function(t,e,n){},"4ee5":function(t,e,n){"use strict";var o=n("b143"),r=n.n(o);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Controls",{on:{play:t.play,pause:t.pause}}),n("Room",{ref:"room",attrs:{x:500,y:500}})],1)},i=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"room",staticClass:"room",style:t.roomStyle,on:{mousemove:t.mousemove}},[t._l(t.audioNodes,(function(e){return n("AudioNode",{key:e.id,ref:"audioNodes",refInFor:!0,attrs:{stream:e.stream,position:t.position,offsetX:t.x/2,offsetY:t.y/2}})})),n("div",{staticClass:"listener"})],2)},s=[],a=(n("4160"),n("a9e3"),n("159b"),n("96cf"),n("1da1")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audioNode",style:t.nodeStyle})},l=[],p={data:function(){return{audioctx:null,panner:null,source:null}},props:{stream:{type:MediaStream,required:!0},position:{type:Object,required:!0},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0}},computed:{audioEl:function(){return this.$refs["audio"]},nodeStyle:function(){return{left:"".concat(this.position.x,"px"),top:"".concat(this.position.y,"px")}},audioPosition:function(){return{x:this.position.x-this.offsetX,y:0,z:this.position.y-this.offsetY}}},mounted:function(){this.audioctx=new AudioContext,this.source=this.audioctx.createMediaStreamSource(this.stream),this.panner=this.audioctx.createPanner(),this.panner.panningModel="HRTF",this.source.connect(this.panner),this.panner.connect(this.audioctx.destination),this.audioctx.suspend()},methods:{play:function(){console.info("play"),this.audioctx.resume()},pause:function(){console.info("pause"),this.audioctx.suspend()}},watch:{audioPosition:function(t){var e=t.x,n=t.y,o=t.z,r=.01;console.info(e*r,n*r,o*r),this.panner.setPosition(e*r,n*r,o*r)}}},f=p,d=(n("c660"),n("2877")),h=Object(d["a"])(f,c,l,!1,null,"5633e6f6",null),m=h.exports,y={components:{AudioNode:m},data:function(){return{position:{x:0,y:0},audioNodes:[]}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:n=e.sent,t.audioNodes.push({id:1,stream:n});case 4:case"end":return e.stop()}}),e)})))()},props:{x:{type:Number,required:!0},y:{type:Number,required:!0}},computed:{roomStyle:function(){return{width:"".concat(this.x,"px"),height:"".concat(this.y,"px")}},boundingClientRect:function(){return this.$refs["room"].getBoundingClientRect()}},methods:{play:function(){this.$refs["audioNodes"].forEach((function(t){t.play()}))},pause:function(){this.$refs["audioNodes"].forEach((function(t){t.pause()}))},mousemove:function(t){var e=t.clientX-this.boundingClientRect.x,n=t.clientY-this.boundingClientRect.y,o={x:e,y:n};this.position=o}}},v=y,b=(n("4ee5"),Object(d["a"])(v,u,s,!1,null,"41dcc578",null)),x=b.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("button",{on:{click:function(e){return t.$emit("play")}}},[t._v("play")]),n("button",{on:{click:function(e){return t.$emit("pause")}}},[t._v("pause")])])},w=[],O={},_=Object(d["a"])(O,g,w,!1,null,null,null),j=_.exports,N={components:{Room:x,Controls:j},methods:{play:function(){this.$refs["room"].play()},pause:function(){this.$refs["room"].pause()}}},$=N,S=Object(d["a"])($,r,i,!1,null,null,null),C=S.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(C)}}).$mount("#app")},b143:function(t,e,n){},c660:function(t,e,n){"use strict";var o=n("318c"),r=n.n(o);r.a}});
//# sourceMappingURL=app.d2c844b0.js.map